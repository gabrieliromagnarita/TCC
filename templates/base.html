<HTML lang="pt-br">
    <HEAD>
        <title>{% block title %}Título{% endblock %}</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='estilo.css') }}">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=1240,shrink-to-fit=no">
    </HEAD>
    <BODY>
        <div id="header">
            <img src="{{ url_for('static',  filename='imagens/logo-face-a-face.png')}}" id="logo-face-a-face">
            <div id="icons">
                <img src="{{ url_for('static',  filename='imagens/search-bar-icon.png')}}" id="search-bar-icon">
                <img src="{{ url_for('static',  filename='imagens/user-icon.png')}}" id="user-icon">
                <a href="/carrinho-render"><img src="{{ url_for('static',  filename='imagens/shopping-cart-icon.png')}}" id="shopping-cart-icon"></a>
            </div>
        </div>
        <div id="sub-header">
            <a href="/historia-render" class="header-text historia">HISTÓRIA</a> 
            <a href="/home-render" class="header-text home">HOME</a> 
            <a href="/faq-render" class="header-text faq">FAQ</a>
            {% set u = session.get('user') %}
            {% if u and u.get('email') == 'gabihromagna@gmail.com' %}
                <a href="{{ url_for('admin.admin') }}" class="header-text-adm admin">ADM</a>
            {% endif %}
        </div>
        {% block content %}{% endblock %}

        <!-- modal -->
        <div id="account-modal" class="modal-user">
            <div class="content-modal-user">
                <span class="fechar-user">&times;</span>
                {% set u = session.get('user') %}
                {% if u and u is mapping %}
                    <p class="nome-modal-user">{{ u.get('nome', '') }}</p>
                    {% if u.get('email') == 'gabihromagna@gmail.com' %}
                        <p class="admin-tag-modal-user">ADMINISTRADOR</p>
                    {% endif %}
                    <p class="email-modal-user"><strong>Email:</strong> {{ u.get('email', '') }}</p>
                    <p class="fone-modal-user"><strong>Telefone:</strong> {{ u.get('telefone', '') }}</p>
                    <p class="nasc-modal-user"><strong>Nascimento:</strong> {{ u.get('nascimento', '') }}</p>
                    <a href="{{ url_for('login.logout') }}" class="botao-logout">SAIR DA CONTA</a>
                    <a href="" class="botao-delete">excluir conta</a>
                {% else %}
                    <p>Você não está logado.</p>
                    <a href="{{ url_for('login.login') }}">Entrar</a>
                {% endif %}
            </div>
        </div>
        {% block scripts %}
        <script>
            const modal = document.getElementById('account-modal');
            const btn = document.getElementById('user-icon');
            const span = document.getElementsByClassName('fechar-user')[0];
            
            btn.onclick = function() {
                modal.style.display = 'block';
            }
            
            span.onclick = function() {
                modal.style.display = 'none';
            }
            
            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = 'none';
                }
            }

            document.addEventListener('DOMContentLoaded', function(){
                const inputFone = document.querySelector('.fone');
                const inputData = document.querySelector('.dataNasc');

                // mask do telefone
                if(inputFone){
                    inputFone.addEventListener('input', function(e) {
                        let value = e.target.value.replace(/\D/g, '');
                        if (value.length > 11) value = value.slice(0, 11);
                        if (value.length > 6) {
                            e.target.value = value.replace(/^(\d{2})(\d{5})(\d{0,4}).*/, '($1) $2-$3');
                        } else if (value.length > 2) {
                            e.target.value = value.replace(/^(\d{2})(\d{0,5})/, '($1) $2');
                        } else {
                            e.target.value = value.replace(/^(\d*)/, '($1');
                        }
                    });
                }
                

                // mask da data
                if(inputData){
                    inputData.addEventListener('input', function(e) {
                        let value = e.target.value.replace(/\D/g, '');
                        if (value.length > 8) value = value.slice(0, 8);
                        if (value.length > 4) {
                            e.target.value = value.replace(/^(\d{2})(\d{2})(\d{0,4}).*/, '$1/$2/$3');
                        } else if (value.length > 2) {
                            e.target.value = value.replace(/^(\d{2})(\d{0,2})/, '$1/$2');
                        } else {
                            e.target.value = value;
                        }
                    });
                }
                
            })
        </script>
        {% endblock %}
    </body>
</html>